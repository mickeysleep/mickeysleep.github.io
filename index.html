<!DOCTYPE html>
<html>
<head>
<title>GitHub 測試</title>
</head>
<body>
    <div>
        <div id="curve_chart" style="width: 850px; height: 500px;display:none;"></div>
        <div id="curve_chart2" style="width: 850px; height: 500px;background-color:white;">
            <canvas id="myChart"></canvas>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        //const ctx = document.getElementById('myChart');

        //new Chart(ctx, {
        //    type: 'bar',
        //    data: {
        //        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        //        datasets: [{
        //            label: '# of Votes',
        //            data: [12, 19, 3, 5, 2, 3],
        //            borderWidth: 1
        //        }]
        //    },
        //    options: {
        //        scales: {
        //            y: {
        //                beginAtZero: true
        //            }
        //        }
        //    }
        //});

        drawChart2();
        function drawChart2() {

            var data = {
                emp: ['測試'],
                month: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                year_now: [10, 13, 13, 15, 14, 18, 20, 21, 19, 22, 16, 11],
                year_last: [12, 14, 13, 11, 12, 6, 17, 22, 3, 11, 12, 5],
                year_beforelast: [11, 12, 16, 19, 19, 16, 21, 25, 10, 11, 23, 25]
            };

            var emp = '';
            //var itemlist = [];
            var mlist = [];
            var befmlist = [];
            var nowmlist = [];
            var beflastmlist = [];
            //var data = JSON.parse(data);
            //console.log(data);
            $.each(data, function (index, d,i) {
                if (index == 'emp') {
                    emp = data[index][0];
                }
                if (index == 'month') {
                    $.each(data[index], function (i) {
                        mlist.push(data[index][i]);
                    });
                }
                if (index == 'year_now') {
                    $.each(data[index], function (i) {
                        nowmlist.push(data[index][i]);
                    });
                }
                if (index == 'year_last') {
                    $.each(data[index], function (i) {
                        befmlist.push(data[index][i]);
                    });
                }
                if (index == 'year_beforelast') {
                    $.each(data[index], function (i) {
                        beflastmlist.push(data[index][i]);
                    });
                }
            });

            const ctx = document.getElementById('myChart');

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: mlist,
                    datasets: [{
                        label: '2023 年',
                        data: nowmlist
                    }, {
                        label: '2022 年',
                        data: befmlist
                    }, {
                        label: '2021 年',
                        data: beflastmlist
                    }]
                },
                options: {
                    plugins: {
                        title: {
                            display: true,
                            text: emp + ' 近3年趨勢圖',
                            align: 'start',
                            font: {
                                size: 16
                            },

                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '元'
                            }
                        }
                    }
                }
            });
        }
    </script>

</body>
</html>
